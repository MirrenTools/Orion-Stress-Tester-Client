{"remainingRequest":"D:\\project\\vue\\Orion-Stress-Tester-Client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\project\\vue\\Orion-Stress-Tester-Client\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\project\\vue\\Orion-Stress-Tester-Client\\src\\App.vue","mtime":1581918294438},{"path":"D:\\project\\vue\\Orion-Stress-Tester-Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580976810633},{"path":"D:\\project\\vue\\Orion-Stress-Tester-Client\\node_modules\\babel-loader\\lib\\index.js","mtime":1580976845122},{"path":"D:\\project\\vue\\Orion-Stress-Tester-Client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580976810633},{"path":"D:\\project\\vue\\Orion-Stress-Tester-Client\\node_modules\\vue-loader\\lib\\index.js","mtime":1580976838260}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n/**http请求类型*/\r\nconst REQUEST_TYPE_HTTP = 'HTTP';\r\n/**WebSocket请求类型*/\r\nconst REQUEST_TYPE_WEB_SOCKET = 'WebSocket';\r\n/**TCP请求类型*/\r\nconst REQUEST_TYPE_TCP = 'TCP';\r\n/**证书类型,默认证书*/\r\nconst REQUEST_CERT_DEFAULT = 'DEFAULT';\r\n/**证书类型pem*/\r\nconst REQUEST_CERT_PEM = 'PEM';\r\n/**证书类型PFX*/\r\nconst REQUEST_CERT_PFX = 'PFX';\r\n/**证书类型JKS*/\r\nconst REQUEST_CERT_JKS = 'JKS';\r\n\r\n/**普通日志*/\r\nconst LOG_INFO = 'INFO';\r\n/**成功日志*/\r\nconst LOG_SUCCESS = 'SUCCESS';\r\n/**异常日志*/\r\nconst LOG_ERROR = 'ERROR';\r\n\r\n/** 取消操作 */\r\nconst WS_COMMAND_CANCEL = -1;\r\n/** 提交测试*/\r\nconst WS_COMMAND_SUBMIT_TEST = 1;\r\n/** 开始的前测试,成功data=1,失败data=0 */\r\nconst WS_COMMAND_BEFORE_REQUEST_TEST = 2;\r\n/** 测试数据响应 */\r\nconst WS_COMMAND_TEST_RESPONSE = 3;\r\n/** 日志输出 */\r\nconst WS_COMMAND_TEST_LOG_RESPONSE = 4;\r\n/** 任务已完成 */\r\nconst WS_COMMAND_TEST_COMPLETE = 99;\r\n/** 缺少请求参数或存在无效的请求参数 */\r\nconst WS_COMMAND_INVALID_PARAMETER = 412;\r\n/** 失败响应 */\r\nconst WS_COMMAND_ERROR = 500;\r\n/** 失败响应 */\r\nconst WS_COMMAND_JVM_METRIC = 1000;\r\n\r\nexport default {\r\n\tname: 'Orion-Stress-Tester',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 是否显示请求统计信息\r\n\t\t\tisStatistics: false,\r\n\t\t\t//请求统计的信息\r\n\t\t\tstatisticsInfo: '',\r\n\t\t\t//是否正在执行中\r\n\t\t\tisExecuting: false,\r\n\t\t\t//是否已经执行过\r\n\t\t\tisExecuted: false,\r\n\t\t\t//请求设置\r\n\t\t\trequestConfig: {\r\n\t\t\t\t//是否打印响应内容\r\n\t\t\t\tprintResInfo: true,\r\n\t\t\t\t//测试机与URL服务器保持连接\r\n\t\t\t\tkeepAlive: true,\r\n\t\t\t\t//最大建立连接数\r\n\t\t\t\tpoolSize: null,\r\n\t\t\t\t//连接(请求)超时\r\n\t\t\t\ttimeout: null\r\n\t\t\t},\r\n\t\t\t//请求的数据\r\n\t\t\trequestData: {\r\n\t\t\t\t//请求的类型\r\n\t\t\t\trequestType: REQUEST_TYPE_HTTP,\r\n\t\t\t\t//WebSocket的版本\r\n\t\t\t\twebSocketVersion: 'V13',\r\n\t\t\t\t//WebSocket子协议\r\n\t\t\t\tsubProtocols: [],\r\n\t\t\t\t//SNI 服务器名称\r\n\t\t\t\tserverName: '',\r\n\t\t\t\t//是否使用SSL\r\n\t\t\t\tisSSL: false,\r\n\t\t\t\t//证书的类型\r\n\t\t\t\tcert: 'DEFAULT',\r\n\t\t\t\t//证书的key\r\n\t\t\t\tcertKey: null,\r\n\t\t\t\t//证书的value\r\n\t\t\t\tcertValue: null,\r\n\t\t\t\t//主机地址,TCP时有效\r\n\t\t\t\thost: '',\r\n\t\t\t\t//端口号,TCP时有效\r\n\t\t\t\tport: null,\r\n\t\t\t\t//http请求的类型\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\t//请求的header数据\r\n\t\t\t\theaders: [],\r\n\t\t\t\t//请求的url\r\n\t\t\t\turl: '',\r\n\t\t\t\t//请求的body\r\n\t\t\t\tbody: null,\r\n\t\t\t\t//请求的总次数\r\n\t\t\t\tcount: null,\r\n\t\t\t\t//每次请求多数次\r\n\t\t\t\taverage: null,\r\n\t\t\t\t//请求的间隔\r\n\t\t\t\tinterval: null\r\n\t\t\t},\r\n\t\t\t//请求数据长度\r\n\t\t\trequestDataLen: 0,\r\n\t\t\t//请求响应数据长度\r\n\t\t\tresponseDataLen: 0,\r\n\t\t\t//请求成功的数量\r\n\t\t\tresponseSucceeded: 0,\r\n\t\t\t//请求失败的数量\r\n\t\t\tresponseFailed: 0,\r\n\t\t\t//请求统计信息\r\n\t\t\t// code=状态码\r\n\t\t\t// count=请求次数\r\n\t\t\t// total=总用时;\r\n\t\t\t// max=最大用时;\r\n\t\t\t// mean=平均用时;\r\n\t\t\tresponseTimeCount: [],\r\n\t\t\t//服务器性能\r\n\t\t\t//processors 处理器数量\r\n\t\t\t//totalMemory 可用内存\r\n\t\t\t//maxMemory 最大内存\r\n\t\t\t//freeMemory 剩余内存\r\n\t\t\tserverMetrics: {\r\n\t\t\t\tprocessors: 0,\r\n\t\t\t\ttotalMemory: 0,\r\n\t\t\t\tmaxMemory: 0,\r\n\t\t\t\tfreeMemory: 0\r\n\t\t\t},\r\n\t\t\t//连接服务器的WebSocket\r\n\t\t\twebsocket: null\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 是否显示请求数量统计信息\r\n\t\t */\r\n\t\tisShowStatistics() {\r\n\t\t\tif (this.requestData.count > 0 && this.requestData.average > 0 && this.requestData.interval > 0) {\r\n\t\t\t\tthis.isStatistics = true;\r\n\t\t\t\tthis.statisticsInfo = this.$t('statisticsInfo')\r\n\t\t\t\t\t.replace('{interval}', this.requestData.interval)\r\n\t\t\t\t\t.replace('{average}', this.requestData.average)\r\n\t\t\t\t\t.replace('{count}', this.requestData.count)\r\n\t\t\t\t\t.replace('{conn}', this.requestConfig.poolSize == null ? this.requestData.count : this.requestConfig.poolSize)\r\n\t\t\t\t\t.replace('{sum}', this.requestData.count * this.requestData.average);\r\n\t\t\t} else {\r\n\t\t\t\tthis.isStatistics = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除SubProtocols\r\n\t\t * @param {Object} item\r\n\t\t */\r\n\t\tremoveSubProtocols(item) {\r\n\t\t\tthis.$confirm('确认关闭？')\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tvar index = this.requestData.subProtocols.indexOf(item);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tthis.requestData.subProtocols.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 添加SubProtocols\r\n\t\t */\r\n\t\taddSubProtocols() {\r\n\t\t\tthis.requestData.subProtocols.push({\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tkey: Date.now()\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除header\r\n\t\t * @param {Object} item\r\n\t\t */\r\n\t\tremoveHeader(item) {\r\n\t\t\tthis.$confirm('确认关闭？')\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tvar index = this.requestData.headers.indexOf(item);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tthis.requestData.headers.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 添加header\r\n\t\t */\r\n\t\taddHeader() {\r\n\t\t\tthis.requestData.headers.push({\r\n\t\t\t\tkey: '',\r\n\t\t\t\tvalue: ''\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载证书的key\r\n\t\t */\r\n\t\tloadCertKey() {\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\tvar file = this.$refs.readCertKey.files[0];\r\n\t\t\treader.readAsText(file);\r\n\t\t\tvar tis = this;\r\n\t\t\treader.onload = function(res) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\ttis.requestData.certKey = res.target.result;\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载证书的value\r\n\t\t */\r\n\t\tloadCertValue() {\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\tvar file = this.$refs.readCertValue.files[0];\r\n\t\t\treader.readAsText(file);\r\n\t\t\tvar tis = this;\r\n\t\t\treader.onload = function(res) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\ttis.requestData.certValue = res.target.result;\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清楚数据为默认数据\r\n\t\t */\r\n\t\tclearToDefaultData() {\r\n\t\t\t//请求数据长度\r\n\t\t\tthis.requestDataLen = 0;\r\n\t\t\t//请求响应数据长度\r\n\t\t\tthis.responseDataLen = 0;\r\n\t\t\t//请求成功的数量\r\n\t\t\tthis.responseSucceeded = 0;\r\n\t\t\t//请求失败的数量\r\n\t\t\tthis.responseFailed = 0;\r\n\t\t\t//请求统计信息\r\n\t\t\tthis.responseTimeCount = [];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 截取小数点并四舍五入\r\n\t\t * @param {Double} num\r\n\t\t * @param {int} len\r\n\t\t */\r\n\t\ttoFixed(num, len) {\r\n\t\t\tvar index = num.toString().indexOf('.');\r\n\t\t\tif (index != -1) {\r\n\t\t\t\tif (num.toString().substring(index).length > len) {\r\n\t\t\t\t\treturn num.toFixed(len);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn num;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 执行请求\r\n\t\t */\r\n\t\texecute() {\r\n\t\t\tthis.$refs.requestTable.validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.isExecuting = true; //修改是否在执行状态,执行中\r\n\t\t\t\t\tthis.isExecuted = true; //标记前端控制台状态为已执行\r\n\t\t\t\t\tvar connectMsg = this.$t('consoleConnecting');\r\n\t\t\t\t\tthis.consolePrintInfo(LOG_INFO, connectMsg);\r\n\t\t\t\t\t//连接WebSocket并在open后请求数据\r\n\t\t\t\t\tvar wshost=process.env.VUE_APP_BASE_API;\r\n\t\t\t\t\tif(wshost==null || wshost=='wlhost'){\r\n\t\t\t\t\t\twshost=window.location.host;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.websocket = new WebSocket('ws://'+wshost+'/ws/ost');\r\n\t\t\t\t\tthis.websocket.onopen = () => {\r\n\t\t\t\t\t\tvar connected = this.$t('consoleConnected');\r\n\t\t\t\t\t\tthis.consolePrintInfo(LOG_SUCCESS, connected);\r\n\t\t\t\t\t\tvar trData = this.requestData;\r\n\t\t\t\t\t\t//初始化默认数据\r\n\t\t\t\t\t\tthis.clearToDefaultData();\r\n\r\n\t\t\t\t\t\t//加载请求数据\r\n\t\t\t\t\t\tvar reqData = {\r\n\t\t\t\t\t\t\ttype: trData.requestType,\r\n\t\t\t\t\t\t\turl: trData.url.trim(),\r\n\t\t\t\t\t\t\tcount: trData.count,\r\n\t\t\t\t\t\t\taverage: trData.average,\r\n\t\t\t\t\t\t\tinterval: trData.interval\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (trData.isSSL) {\r\n\t\t\t\t\t\t\treqData.isSSL = true;\r\n\t\t\t\t\t\t\tif (trData.cert == REQUEST_CERT_DEFAULT) {\r\n\t\t\t\t\t\t\t\treqData.cert = REQUEST_CERT_DEFAULT;\r\n\t\t\t\t\t\t\t} else if (trData.certKey != null && trData.certKey.trim() != '' && (trData.certValue != null && trData.certValue.trim() != '')) {\r\n\t\t\t\t\t\t\t\treqData.cert = trData.cert;\r\n\t\t\t\t\t\t\t\treqData.certKey = trData.certKey.trim();\r\n\t\t\t\t\t\t\t\treqData.certValue = trData.certValue.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.requestType == REQUEST_TYPE_WEB_SOCKET) {\r\n\t\t\t\t\t\t\treqData.webSocketVersion = trData.webSocketVersion;\r\n\t\t\t\t\t\t\tif (trData.subProtocols.length > 0) {\r\n\t\t\t\t\t\t\t\tvar subPs = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < trData.subProtocols.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar v = trData.subProtocols[i].value;\r\n\t\t\t\t\t\t\t\t\tif (v != null && v.trim() != '') {\r\n\t\t\t\t\t\t\t\t\t\tsubPs.push(v.trim());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (subPs.length > 0) {\r\n\t\t\t\t\t\t\t\t\treqData.subProtocols = subPs;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trData.requestType == REQUEST_TYPE_TCP) {\r\n\t\t\t\t\t\t\treqData.host = trData.host.trim();\r\n\t\t\t\t\t\t\tif (trData.port == '' || trData < 0 || trData > 65535 || isNaN(parseInt(trData.port))) {\r\n\t\t\t\t\t\t\t\treqData.port = trData.isSSL ? 443 : 80;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treqData.port = parseInt(trData.port);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (trData.serverName != null && trData.serverName.trim() != '') {\r\n\t\t\t\t\t\t\t\treqData.serverName = trData.serverName.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.requestType == REQUEST_TYPE_HTTP) {\r\n\t\t\t\t\t\t\treqData.method = trData.method;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.headers != null && trData.headers.length != 0 && trData.requestType != REQUEST_TYPE_TCP) {\r\n\t\t\t\t\t\t\tvar headers = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < trData.headers.length; i++) {\r\n\t\t\t\t\t\t\t\tvar h = trData.headers[i];\r\n\t\t\t\t\t\t\t\tif (h.key.trim() != '' && h.value.trim() != '') {\r\n\t\t\t\t\t\t\t\t\theaders.push(h.trim());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (headers.length > 0) {\r\n\t\t\t\t\t\t\t\treqData.headers = headers;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.body != null && trData.body.trim() != '') {\r\n\t\t\t\t\t\t\treqData.body = trData.body.trim();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treqData.keepAlive = this.requestConfig.keepAlive;\r\n\t\t\t\t\t\tif (reqData.keepAlive) {\r\n\t\t\t\t\t\t\tvar vu = this.requestConfig.poolSize;\r\n\t\t\t\t\t\t\tif (vu == null || vu == 0 || vu == '' || isNaN(parseInt(vu))) {\r\n\t\t\t\t\t\t\t\tvu = trData.count;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treqData.poolSize = parseInt(vu);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.requestConfig.timeout != null && this.requestConfig.timeout > 0) {\r\n\t\t\t\t\t\t\treqData.timeout = parseInt(this.requestConfig.timeout);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treqData.printResInfo = this.requestConfig.printResInfo;\r\n\t\t\t\t\t\tconsole.log(reqData);\r\n\t\t\t\t\t\tvar body = { code: WS_COMMAND_SUBMIT_TEST, data: reqData };\r\n\t\t\t\t\t\tthis.websocket.send(JSON.stringify(body));\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.websocket.onerror = err => {\r\n\t\t\t\t\t\tconsole.log('Connection error:');\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.isExecuting = false; //修改是否在执行状态,执行结束\r\n\t\t\t\t\t\tthis.consolePrintInfo(LOG_ERROR, this.$t('consoleConnectFailed'));\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//关闭事件\r\n\t\t\t\t\tthis.websocket.onclose = () => {\r\n\t\t\t\t\t\tthis.isExecuting = false; //修改是否在执行状态,执行结束\r\n\r\n\t\t\t\t\t\tconsole.log(this.$t('consoleClosed'));\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//响应事件\r\n\t\t\t\t\tthis.websocket.onmessage = res => {\r\n\t\t\t\t\t\t//这里处理后台返回的结果\r\n\t\t\t\t\t\tvar data = JSON.parse(res.data);\r\n\t\t\t\t\t\t// console.log(data);\r\n\t\t\t\t\t\tif (data.code == WS_COMMAND_INVALID_PARAMETER) {\r\n\t\t\t\t\t\t\t//缺少参数或取消参数的响应\r\n\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_ERROR, this.$t('commandInvalidParameter') + data.msg);\r\n\t\t\t\t\t\t\tthis.websocket.close();\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_BEFORE_REQUEST_TEST) {\r\n\t\t\t\t\t\t\t//提交测试前的测试响应\r\n\t\t\t\t\t\t\tif (data.data == 1) {\r\n\t\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_SUCCESS, this.$t('commandBeforeRequestTestSucceeded'));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_ERROR, this.$t('commandBeforeRequestTestFailed') + data.msg);\r\n\t\t\t\t\t\t\t\tthis.websocket.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_JVM_METRIC) {\r\n\t\t\t\t\t\t\tvar rd = data.data;\r\n\t\t\t\t\t\t\tthis.serverMetrics.processors = rd.processors;\r\n\t\t\t\t\t\t\tthis.serverMetrics.totalMemory = this.toFixed(rd.totalMemory / 1048576, 5);\r\n\t\t\t\t\t\t\tthis.serverMetrics.maxMemory = this.toFixed(rd.maxMemory / 1048576, 5);\r\n\t\t\t\t\t\t\tthis.serverMetrics.freeMemory = this.toFixed(rd.freeMemory / 1048576, 5);\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_TEST_LOG_RESPONSE) {\r\n\t\t\t\t\t\t\t//请求日志响应\r\n\t\t\t\t\t\t\tvar resData = data.data;\r\n\t\t\t\t\t\t\tvar state = resData.state == 1 ? this.$t('succee') : this.$t('fail');\r\n\t\t\t\t\t\t\tvar msg = this.$t('commandTestResponseCount').replace('{count}', resData.count);\r\n\t\t\t\t\t\t\tif (resData.index != 0) {\r\n\t\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseIndex').replace('{index}', resData.index);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseState').replace('{state}', state);\r\n\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseCode').replace('{code}', resData.code);\r\n\t\t\t\t\t\t\tif (resData.body != null) {\r\n\t\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseBody').replace('{body}', resData.body);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.requestConfig.printResInfo) {\r\n\t\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_INFO, msg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_TEST_RESPONSE) {\r\n\t\t\t\t\t\t\t//测试统计信息响应\r\n\t\t\t\t\t\t\tvar resData = data.data;\r\n\t\t\t\t\t\t\t//获取http/ws响应长度数据统计\r\n\t\t\t\t\t\t\tvar vhcbr = resData['vertx.http.client.bytesReceived'];\r\n\t\t\t\t\t\t\tif (vhcbr == null) {\r\n\t\t\t\t\t\t\t\t//获取tcp的响应数据长度\r\n\t\t\t\t\t\t\t\tvhcbr = resData['vertx.net.client.bytesReceived'];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (vhcbr != null && vhcbr.length > 0) {\r\n\t\t\t\t\t\t\t\tvar total = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < vhcbr.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttotal += vhcbr[i].total;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.responseDataLen = total;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//获取http/ws发送数据长度统计\r\n\t\t\t\t\t\t\tvar vhcbs = resData['vertx.http.client.bytesSent'];\r\n\t\t\t\t\t\t\tif (vhcbs == null) {\r\n\t\t\t\t\t\t\t\t//获取tcp发送数据长度统计\r\n\t\t\t\t\t\t\t\tvhcbs = resData['vertx.net.client.bytesSent'];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (vhcbs != null && vhcbs.length > 0) {\r\n\t\t\t\t\t\t\t\tvar total = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < vhcbs.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttotal += vhcbs[i].total;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.requestDataLen = total;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//获取http/ws响应统计\r\n\t\t\t\t\t\t\tvar vhcrt = resData['vertx.http.client.responseTime'];\r\n\t\t\t\t\t\t\tif (vhcrt != null && vhcrt.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.responseTimeCount = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < vhcrt.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar obj = vhcrt[i];\r\n\t\t\t\t\t\t\t\t\tvar timeCount = {};\r\n\t\t\t\t\t\t\t\t\ttimeCount.code = obj.tags.code;\r\n\t\t\t\t\t\t\t\t\ttimeCount.count = obj.count;\r\n\t\t\t\t\t\t\t\t\ttimeCount.total = this.toFixed(obj.totalTimeMs, 5);\r\n\t\t\t\t\t\t\t\t\ttimeCount.max = this.toFixed(obj.maxMs, 5);\r\n\t\t\t\t\t\t\t\t\ttimeCount.mean = this.toFixed(obj.meanMs, 5);\r\n\t\t\t\t\t\t\t\t\tthis.responseTimeCount.push(timeCount);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//获取已成功处理数量\r\n\t\t\t\t\t\t\tthis.responseSucceeded = resData.succeeded;\r\n\t\t\t\t\t\t\t//获取处理已失败数量\r\n\t\t\t\t\t\t\tthis.responseFailed = resData.failed;\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_TEST_COMPLETE) {\r\n\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_SUCCESS, this.$t('commandTestComplete'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tdocument.documentElement.scrollTop = document.body.scrollHeight;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消执行\r\n\t\t */\r\n\t\texecuteCancel() {\r\n\t\t\tthis.isExecuting = false;\r\n\t\t\tif (this.websocket != null) {\r\n\t\t\t\tthis.websocket.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\tconsolePrintInfo(log, msg) {\r\n\t\t\tvar time = new Date()\r\n\t\t\t\t.toISOString()\r\n\t\t\t\t.replace('T', ' ')\r\n\t\t\t\t.replace('Z', '');\r\n\t\t\tvar el = document.createElement('div');\r\n\t\t\tif (log == 'SUCCESS') {\r\n\t\t\t\tel.style.color = '#28a745';\r\n\t\t\t} else if (log == 'ERROR') {\r\n\t\t\t\tel.style.color = '#dc3545';\r\n\t\t\t}\r\n\t\t\tvar logEl = document.createElement('p');\r\n\t\t\tlogEl.style.marginBottom = '0';\r\n\t\t\tlogEl.innerText = '[ ' + log + ' ] ' + time;\r\n\t\t\tel.appendChild(logEl);\r\n\r\n\t\t\tvar msgEl = document.createElement('p');\r\n\t\t\tmsgEl.style.marginTop = '3px';\r\n\t\t\tmsgEl.innerText = msg;\r\n\t\t\tel.appendChild(msgEl);\r\n\t\t\tdocument.getElementById('response-body').appendChild(el);\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs.responseConsoleBody.scrollTop = this.$refs.responseConsoleBody.scrollHeight;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\t'requestData.url'(val) {\r\n\t\t\tif (val.indexOf('https://') != -1 && this.requestData.requestType == REQUEST_TYPE_HTTP) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (val.indexOf('wss://') != -1 && this.requestData.requestType == REQUEST_TYPE_WEB_SOCKET) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (this.requestData.requestType != 'TCP') {\r\n\t\t\t\tthis.requestData.isSSL = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t'requestData.requestType'() {\r\n\t\t\tif (this.requestData.url.indexOf('https://') != -1 && this.requestData.requestType == REQUEST_TYPE_HTTP) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (this.requestData.url.indexOf('wss://') != -1 && this.requestData.requestType == REQUEST_TYPE_WEB_SOCKET) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (this.requestData.requestType != REQUEST_TYPE_TCP) {\r\n\t\t\t\tthis.requestData.isSSL = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t'requestData.count'() {\r\n\t\t\tif ((this.requestData.count >= 10 && this.requestData.average > 1000) || this.requestData.average > 10000) {\r\n\t\t\t\tthis.requestConfig.printResInfo = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.requestConfig.printResInfo = true;\r\n\t\t\t}\r\n\t\t\tthis.isShowStatistics();\r\n\t\t},\r\n\t\t'requestData.average'() {\r\n\t\t\tif ((this.requestData.count >= 10 && this.requestData.average > 1000) || this.requestData.average > 10000) {\r\n\t\t\t\tthis.requestConfig.printResInfo = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.requestConfig.printResInfo = true;\r\n\t\t\t}\r\n\t\t\tthis.isShowStatistics();\r\n\t\t},\r\n\t\t'requestData.interval'() {\r\n\t\t\tthis.isShowStatistics();\r\n\t\t},\r\n\t\t'requestConfig.poolSize'() {\r\n\t\t\tthis.isShowStatistics();\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\twatchResponseHeaderColor() {\r\n\t\t\t// 获取响应状态\r\n\t\t\tif (this.responseSucceeded > this.responseFailed) {\r\n\t\t\t\treturn 'background-color:#e8f6f0;';\r\n\t\t\t} else if (this.responseSucceeded < this.responseFailed) {\r\n\t\t\t\treturn 'background-color:#fae7e7;';\r\n\t\t\t} else {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\r\n\t<el-container id=\"app\">\r\n\t\t<!-- 手机导航栏 -->\r\n\t\t<div id=\"mobile-bar\">\r\n\t\t\t<img src=\"./assets/logo.png\" alt=\"\" class=\"menu-button\" />\r\n\t\t\t<div class=\"logo\"><a href=\"/\">Orion-Stress-Tester</a></div>\r\n\t\t</div>\r\n\t\t<!-- 电脑导航栏 -->\r\n\t\t<el-header id=\"pc-bar\">\r\n\t\t\t<a id=\"logo\" href=\"/\">\r\n\t\t\t\t<img src=\"./assets/logo.png\" alt=\"\" />\r\n\t\t\t\t<span>Orion-Stress-Tester</span>\r\n\t\t\t</a>\r\n\t\t</el-header>\r\n\r\n\t\t<el-container>\r\n\t\t\t<!-- 中心栏 -->\r\n\t\t\t<el-main id=\"main\">\r\n\t\t\t\t<el-form :model=\"requestData\" label-width=\"120px\" label-position=\"right\" ref=\"requestTable\">\r\n\t\t\t\t\t<!-- 请求类型选择 -->\r\n\t\t\t\t\t<el-form-item :label=\"$t('requestType')\">\r\n\t\t\t\t\t\t<el-radio-group v-model=\"requestData.requestType\" :placeholder=\"$t('select')\">\r\n\t\t\t\t\t\t\t<el-radio label=\"HTTP\">HTTP/S</el-radio>\r\n\t\t\t\t\t\t\t<el-radio label=\"WebSocket\">WebSocket/S</el-radio>\r\n\t\t\t\t\t\t\t<el-radio label=\"TCP\">TCP/S</el-radio>\r\n\t\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- HTTP相关 -->\r\n\t\t\t\t\t<el-form-item\r\n\t\t\t\t\t\tv-if=\"requestData.requestType == 'HTTP'\"\r\n\t\t\t\t\t\t:label=\"$t('requestUrl')\"\r\n\t\t\t\t\t\tprop=\"url\"\r\n\t\t\t\t\t\t:rules=\"[{ required: true, message: $t('requestTips') }, { pattern: /^(http|https):\\/\\/.+$/, message: $t('httpUrlInvalidTips') }]\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<el-input :placeholder=\"$t('httpUrlPlaceholder')\" v-model=\"requestData.url\">\r\n\t\t\t\t\t\t\t<el-select v-model=\"requestData.method\" slot=\"prepend\" placeholder=\"请选择\" style=\"width: 6rem;color: #222;\">\r\n\t\t\t\t\t\t\t\t<el-option value=\"GET\">GET</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"POST\">POST</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"OPTIONS\">OPTIONS</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"HEAD\">HEAD</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"PUT\">PUT</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"DELETE\">DELETE</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"TRACE\">TRACE</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"CONNECT\">CONNECT</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"PATCH\">PATCH</el-option>\r\n\t\t\t\t\t\t\t\t<el-option value=\"OTHER\">OTHER</el-option>\r\n\t\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- WebSocket相关 -->\r\n\t\t\t\t\t<el-form-item\r\n\t\t\t\t\t\tv-if=\"requestData.requestType == 'WebSocket'\"\r\n\t\t\t\t\t\t:label=\"$t('requestUrl')\"\r\n\t\t\t\t\t\tprop=\"url\"\r\n\t\t\t\t\t\t:rules=\"[{ required: true, message: $t('requestTips') }, { pattern: /^(ws|wss):\\/\\/.+$/, message: $t('websocketUrlInvalidTips') }]\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<el-input :placeholder=\"$t('websocketUrlPlaceholder')\" v-model=\"requestData.url\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- TCP相关 -->\r\n\t\t\t\t\t<el-form-item v-if=\"requestData.requestType == 'TCP'\" :label=\"$t('requestUrl')\" required>\r\n\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"2\">\r\n\t\t\t\t\t\t\t<el-form-item><el-checkbox v-model=\"requestData.isSSL\">SSL</el-checkbox></el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"14\">\r\n\t\t\t\t\t\t\t<el-form-item prop=\"host\" :rules=\"[{ required: true, message: $t('tcpHostTips') }]\">\r\n\t\t\t\t\t\t\t\t<el-input :placeholder=\"$t('tcpHostPlaceholder')\" v-model=\"requestData.host\"></el-input>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :xs=\"0\" :sm=\"1\">&nbsp;</el-col>\r\n\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"7\">\r\n\t\t\t\t\t\t\t<el-form-item><el-input type=\"number\" min=\"0\" max=\"65535\" :placeholder=\"$t('tcpPortPlaceholder')\" v-model=\"requestData.port\"></el-input></el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- 证书选择 -->\r\n\t\t\t\t\t<el-form-item :label=\"$t('certSetting')\" v-if=\"requestData.isSSL\">\r\n\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t<el-radio-group v-model=\"requestData.cert\">\r\n\t\t\t\t\t\t\t\t<el-radio label=\"DEFAULT\">{{ $t('certDefault') }}</el-radio>\r\n\t\t\t\t\t\t\t\t<el-radio label=\"PEM\">{{ $t('certPem') }}</el-radio>\r\n\t\t\t\t\t\t\t\t<el-radio label=\"PFX\">{{ $t('certPfx') }}</el-radio>\r\n\t\t\t\t\t\t\t\t<el-radio label=\"JKS\">{{ $t('certJks') }}</el-radio>\r\n\t\t\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"24\" v-if=\"requestData.cert == 'PEM' || requestData.cert == 'PFX' || requestData.cert == 'JKS'\">\r\n\t\t\t\t\t\t\t<el-input type=\"textarea\" :placeholder=\"$t('certKey')\" v-model=\"requestData.certKey\"></el-input>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"24\" v-if=\"requestData.cert == 'PEM' || requestData.cert == 'PFX' || requestData.cert == 'JKS'\">\r\n\t\t\t\t\t\t\t<el-input type=\"textarea\" :placeholder=\"$t('certValue')\" v-model=\"requestData.certValue\"></el-input>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col v-if=\"requestData.cert == 'PEM' || requestData.cert == 'PFX' || requestData.cert == 'JKS'\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"small\" style=\"margin-right: 5px;\" @click=\"$refs.readCertKey.click()\">{{ $t('btnReadCertKey') }}</el-button>\r\n\t\t\t\t\t\t\t<input type=\"file\" style=\"display: none\" accept=\".pem,.key,.p12,.jks,.txt\" ref=\"readCertKey\" @change=\"loadCertKey\" />\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"$refs.readCertValue.click()\">{{ $t('btnReadCertValue') }}</el-button>\r\n\t\t\t\t\t\t\t<input type=\"file\" style=\"display: none\" accept=\".pem,.key,.p12,.jks,.txt\" ref=\"readCertValue\" @change=\"loadCertValue\" />\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- WebSocket的版本 -->\r\n\t\t\t\t\t<el-form-item label=\"WebSocketVersion\" v-if=\"requestData.requestType == 'WebSocket'\">\r\n\t\t\t\t\t\t<el-select v-model=\"requestData.webSocketVersion\" placeholder=\"请选择\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<el-option value=\"V00\">V00</el-option>\r\n\t\t\t\t\t\t\t<el-option value=\"V07\">V07</el-option>\r\n\t\t\t\t\t\t\t<el-option value=\"V08\">V08</el-option>\r\n\t\t\t\t\t\t\t<el-option value=\"V13\">V13</el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!--  WebSocket的SubProtocols -->\r\n\t\t\t\t\t<el-form-item label=\"SubProtocols\" v-if=\"requestData.requestType == 'WebSocket'\">\r\n\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t<el-form-item v-for=\"(item, index) in requestData.subProtocols\" :key=\"item.key\">\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"20\" :sm=\"21\"><el-input v-model=\"item.value\" :placeholder=\"$t('inputValue')\"></el-input></el-col>\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"1\" :sm=\"1\">&nbsp;</el-col>\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"3\" :sm=\"2\">\r\n\t\t\t\t\t\t\t\t\t<el-button @click.prevent=\"removeSubProtocols(item)\" size=\"small\" type=\"danger\">{{ $t('btnRemove') }}</el-button>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"addSubProtocols\">{{ $t('btnAdd') }}</el-button>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- 请求的Header内容 -->\r\n\t\t\t\t\t<el-form-item :label=\"$t('requestHeaders')\" v-if=\"requestData.requestType == 'HTTP' || requestData.requestType == 'WebSocket'\">\r\n\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t<el-form-item v-for=\"(item, index) in requestData.headers\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"10\"><el-input v-model=\"item.key\" :placeholder=\"$t('inputName')\"></el-input></el-col>\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"0\" :sm=\"1\">&nbsp;</el-col>\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"20\" :sm=\"10\"><el-input v-model=\"item.value\" :placeholder=\"$t('inputValue')\"></el-input></el-col>\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"1\" :sm=\"1\">&nbsp;</el-col>\r\n\t\t\t\t\t\t\t\t<el-col :xs=\"3\" :sm=\"2\">\r\n\t\t\t\t\t\t\t\t\t<el-button @click.prevent=\"removeHeader(item)\" size=\"small\" type=\"danger\">{{ $t('btnRemove') }}</el-button>\r\n\t\t\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :span=\"24\">\r\n\t\t\t\t\t\t\t<el-button type=\"primary\" size=\"small\" @click=\"addHeader\">{{ $t('btnAdd') }}</el-button>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- 请求的SNI server name内容 -->\r\n\t\t\t\t\t<el-form-item label=\"ServerName(SNI)\" v-if=\"requestData.requestType == 'TCP'\">\r\n\t\t\t\t\t\t<el-input :placeholder=\"$t('requestServerNamePlaceholder')\" v-model=\"requestData.serverName\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<!-- 请求的body内容 -->\r\n\t\t\t\t\t<el-form-item :label=\"$t('requestBody')\"><el-input type=\"textarea\" :placeholder=\"$t('requestBodyPlaceholder')\" v-model=\"requestData.body\"></el-input></el-form-item>\r\n\t\t\t\t\t<!-- 请求统计信息 -->\r\n\t\t\t\t\t<el-form-item :label=\"$t('requestCount')\" required>\r\n\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"6\">\r\n\t\t\t\t\t\t\t<el-form-item prop=\"count\" :rules=\"[{ required: true, type: 'number', min: 0, message: $t('requestCountTips') }]\" required>\r\n\t\t\t\t\t\t\t\t<el-input\r\n\t\t\t\t\t\t\t\t\t:placeholder=\"requestData.requestType == 'HTTP' ? $t('requestCountPlaceholder') : $t('requestTcpCountPlaceholder')\"\r\n\t\t\t\t\t\t\t\t\tv-model.number=\"requestData.count\"\r\n\t\t\t\t\t\t\t\t></el-input>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :sm=\"1\">&nbsp;</el-col>\r\n\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"8\">\r\n\t\t\t\t\t\t\t<el-form-item prop=\"average\" :rules=\"[{ required: true, type: 'number', min: 0, message: $t('requestAverageTips') }]\" required>\r\n\t\t\t\t\t\t\t\t<el-input\r\n\t\t\t\t\t\t\t\t\t:placeholder=\"requestData.requestType == 'HTTP' ? $t('requestAveragePlaceholder') : $t('requestTcpAveragePlaceholder')\"\r\n\t\t\t\t\t\t\t\t\tv-model.number=\"requestData.average\"\r\n\t\t\t\t\t\t\t\t></el-input>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<el-col :sm=\"1\">&nbsp;</el-col>\r\n\t\t\t\t\t\t<el-col :xs=\"24\" :sm=\"8\">\r\n\t\t\t\t\t\t\t<el-form-item prop=\"interval\" :rules=\"[{ required: true, type: 'number', min: 1, message: $t('requestIntervalTips') }]\" required>\r\n\t\t\t\t\t\t\t\t<el-input\r\n\t\t\t\t\t\t\t\t\t:placeholder=\"requestData.requestType == 'HTTP' ? $t('requestIntervalPlaceholder') : $t('requestTcpIntervalPlaceholder')\"\r\n\t\t\t\t\t\t\t\t\tv-model.number=\"requestData.interval\"\r\n\t\t\t\t\t\t\t\t></el-input>\r\n\t\t\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item v-show=\"isStatistics\">{{ statisticsInfo }}</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<div style=\"display: flex;flex-wrap: wrap;\">\r\n\t\t\t\t\t\t\t<div style=\"margin-right: 0.6rem\">\r\n\t\t\t\t\t\t\t\t<el-tooltip class=\"item\" effect=\"dark\" :content=\"$t('requestConfigPrintInfoTips')\" placement=\"top\">\r\n\t\t\t\t\t\t\t\t\t<el-checkbox v-model=\"requestConfig.printResInfo\" :label=\"$t('requestConfigPrintInfo')\"></el-checkbox>\r\n\t\t\t\t\t\t\t\t</el-tooltip>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div style=\"margin-right: 0.6rem;\"><el-input :placeholder=\"$t('requestConfigTimeout')\" type=\"number\" v-model.number=\"requestConfig.timeout\"></el-input></div>\r\n\t\t\t\t\t\t\t<div style=\"margin-right: 0.6rem;\"><el-checkbox v-model=\"requestConfig.keepAlive\" :label=\"$t('requestConfigKeepAlive')\"></el-checkbox></div>\r\n\t\t\t\t\t\t\t<div style=\"flex: 1;\" v-show=\"requestConfig.keepAlive\">\r\n\t\t\t\t\t\t\t\t<el-input :placeholder=\"$t('requestConfigPoolSize')\" type=\"number\" v-model.number=\"requestConfig.poolSize\"></el-input>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button type=\"primary\" :loading=\"isExecuting\" @click=\"execute\">{{ isExecuting ? $t('btnIsExecute') : $t('btnExecute') }}</el-button>\r\n\t\t\t\t\t\t<el-button v-show=\"isExecuting\" @click=\"executeCancel\">{{ $t('btnCancel') }}</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t\t<div v-show=\"isExecuted\">\r\n\t\t\t\t\t<div id=\"response-heander\" :style=\"watchResponseHeaderColor\">\r\n\t\t\t\t\t\t<!-- 请求进度 -->\r\n\t\t\t\t\t\t<div class=\"response-header-box\" v-show=\"responseSucceeded != 0 || responseFailed != 0\">\r\n\t\t\t\t\t\t\t<div class=\"response-header-label\">\r\n\t\t\t\t\t\t\t\t<b>{{ $t('executeProgress') }}</b>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"response-header-body\">\r\n\t\t\t\t\t\t\t\t<div style=\"line-height: 34px;\" class=\"sm-margin-left-0x\">{{ $t('succee') }}:&nbsp;</div>\r\n\t\t\t\t\t\t\t\t<div style=\"color: #28a745;font-size: 36px;\">{{ responseSucceeded }}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('fail') }}:&nbsp;</div>\r\n\t\t\t\t\t\t\t\t<div style=\"color: #dc3545;font-size: 36px;\">{{ responseFailed }}</div>\r\n\t\t\t\t\t\t\t\t<div class=\"small\">\r\n\t\t\t\t\t\t\t\t\t&nbsp;{{ responseSucceeded + responseFailed }} / {{ requestData.requestType == 'HTTP' ? requestData.count * requestData.average : requestData.count }}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- 请求统计信息-->\r\n\t\t\t\t\t\t<div class=\"response-header-box\" v-show=\"responseTimeCount.length > 0\">\r\n\t\t\t\t\t\t\t<div class=\"response-header-label\" style=\"align-items: flex-start;\">\r\n\t\t\t\t\t\t\t\t<b style=\"line-height: 34px;\">{{ $t('responseTimesCount') }}</b>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"response-header-body\" style=\"flex-direction: column;align-items: flex-start;\">\r\n\t\t\t\t\t\t\t\t<div style=\"display: flex;flex-wrap: wrap;\" v-for=\"(item, index) in responseTimeCount\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"small sm-margin-left-0x\">{{ $t('responseCode') }}:{{ item.code }}</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('responseCount') }}:{{ item.count }}</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('responseTotalTime') }}:{{ item.total }}ms</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('responseMaxTime') }}:{{ item.max }}ms</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('responseMeanTime') }}:{{ item.mean }}ms</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- 数据信息 -->\r\n\t\t\t\t\t\t<div class=\"response-header-box\" v-show=\"requestDataLen != 0 || responseDataLen != 0\">\r\n\t\t\t\t\t\t\t<div class=\"response-header-label\">\r\n\t\t\t\t\t\t\t\t<b>{{ $t('dataLenInfo') }}</b>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"response-header-body\">\r\n\t\t\t\t\t\t\t\t<div style=\"display: flex;flex-wrap: wrap;\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"small sm-margin-left-0x\">{{ $t('requestDataLen') }}:{{ requestDataLen }} byte</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('responseDataLen') }}:{{ responseDataLen }} byte</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<!-- 服务器指标 -->\r\n\t\t\t\t\t\t<div class=\"response-header-box\" v-show=\"serverMetrics != null && serverMetrics.processors != 0\">\r\n\t\t\t\t\t\t\t<div class=\"response-header-label\">\r\n\t\t\t\t\t\t\t\t<b>{{ $t('serverMemory') }}</b>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"response-header-body\">\r\n\t\t\t\t\t\t\t\t<div style=\"display: flex;flex-wrap: wrap;\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"small sm-margin-left-0x\">{{ $t('serverProcessors') }}:{{ serverMetrics.processors }}</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('serverMaxMemory') }}:{{ serverMetrics.maxMemory }} m</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('serverTotalMemory') }}:{{ serverMetrics.totalMemory }} m</div>\r\n\t\t\t\t\t\t\t\t\t<div class=\"small\">{{ $t('serverFreeMemory') }}:{{ serverMetrics.freeMemory }} m</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div id=\"response-body\" ref=\"responseConsoleBody\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</el-main>\r\n\t\t</el-container>\r\n\t</el-container>\r\n</template>\r\n\r\n<script>\r\n/**http请求类型*/\r\nconst REQUEST_TYPE_HTTP = 'HTTP';\r\n/**WebSocket请求类型*/\r\nconst REQUEST_TYPE_WEB_SOCKET = 'WebSocket';\r\n/**TCP请求类型*/\r\nconst REQUEST_TYPE_TCP = 'TCP';\r\n/**证书类型,默认证书*/\r\nconst REQUEST_CERT_DEFAULT = 'DEFAULT';\r\n/**证书类型pem*/\r\nconst REQUEST_CERT_PEM = 'PEM';\r\n/**证书类型PFX*/\r\nconst REQUEST_CERT_PFX = 'PFX';\r\n/**证书类型JKS*/\r\nconst REQUEST_CERT_JKS = 'JKS';\r\n\r\n/**普通日志*/\r\nconst LOG_INFO = 'INFO';\r\n/**成功日志*/\r\nconst LOG_SUCCESS = 'SUCCESS';\r\n/**异常日志*/\r\nconst LOG_ERROR = 'ERROR';\r\n\r\n/** 取消操作 */\r\nconst WS_COMMAND_CANCEL = -1;\r\n/** 提交测试*/\r\nconst WS_COMMAND_SUBMIT_TEST = 1;\r\n/** 开始的前测试,成功data=1,失败data=0 */\r\nconst WS_COMMAND_BEFORE_REQUEST_TEST = 2;\r\n/** 测试数据响应 */\r\nconst WS_COMMAND_TEST_RESPONSE = 3;\r\n/** 日志输出 */\r\nconst WS_COMMAND_TEST_LOG_RESPONSE = 4;\r\n/** 任务已完成 */\r\nconst WS_COMMAND_TEST_COMPLETE = 99;\r\n/** 缺少请求参数或存在无效的请求参数 */\r\nconst WS_COMMAND_INVALID_PARAMETER = 412;\r\n/** 失败响应 */\r\nconst WS_COMMAND_ERROR = 500;\r\n/** 失败响应 */\r\nconst WS_COMMAND_JVM_METRIC = 1000;\r\n\r\nexport default {\r\n\tname: 'Orion-Stress-Tester',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 是否显示请求统计信息\r\n\t\t\tisStatistics: false,\r\n\t\t\t//请求统计的信息\r\n\t\t\tstatisticsInfo: '',\r\n\t\t\t//是否正在执行中\r\n\t\t\tisExecuting: false,\r\n\t\t\t//是否已经执行过\r\n\t\t\tisExecuted: false,\r\n\t\t\t//请求设置\r\n\t\t\trequestConfig: {\r\n\t\t\t\t//是否打印响应内容\r\n\t\t\t\tprintResInfo: true,\r\n\t\t\t\t//测试机与URL服务器保持连接\r\n\t\t\t\tkeepAlive: true,\r\n\t\t\t\t//最大建立连接数\r\n\t\t\t\tpoolSize: null,\r\n\t\t\t\t//连接(请求)超时\r\n\t\t\t\ttimeout: null\r\n\t\t\t},\r\n\t\t\t//请求的数据\r\n\t\t\trequestData: {\r\n\t\t\t\t//请求的类型\r\n\t\t\t\trequestType: REQUEST_TYPE_HTTP,\r\n\t\t\t\t//WebSocket的版本\r\n\t\t\t\twebSocketVersion: 'V13',\r\n\t\t\t\t//WebSocket子协议\r\n\t\t\t\tsubProtocols: [],\r\n\t\t\t\t//SNI 服务器名称\r\n\t\t\t\tserverName: '',\r\n\t\t\t\t//是否使用SSL\r\n\t\t\t\tisSSL: false,\r\n\t\t\t\t//证书的类型\r\n\t\t\t\tcert: 'DEFAULT',\r\n\t\t\t\t//证书的key\r\n\t\t\t\tcertKey: null,\r\n\t\t\t\t//证书的value\r\n\t\t\t\tcertValue: null,\r\n\t\t\t\t//主机地址,TCP时有效\r\n\t\t\t\thost: '',\r\n\t\t\t\t//端口号,TCP时有效\r\n\t\t\t\tport: null,\r\n\t\t\t\t//http请求的类型\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\t//请求的header数据\r\n\t\t\t\theaders: [],\r\n\t\t\t\t//请求的url\r\n\t\t\t\turl: '',\r\n\t\t\t\t//请求的body\r\n\t\t\t\tbody: null,\r\n\t\t\t\t//请求的总次数\r\n\t\t\t\tcount: null,\r\n\t\t\t\t//每次请求多数次\r\n\t\t\t\taverage: null,\r\n\t\t\t\t//请求的间隔\r\n\t\t\t\tinterval: null\r\n\t\t\t},\r\n\t\t\t//请求数据长度\r\n\t\t\trequestDataLen: 0,\r\n\t\t\t//请求响应数据长度\r\n\t\t\tresponseDataLen: 0,\r\n\t\t\t//请求成功的数量\r\n\t\t\tresponseSucceeded: 0,\r\n\t\t\t//请求失败的数量\r\n\t\t\tresponseFailed: 0,\r\n\t\t\t//请求统计信息\r\n\t\t\t// code=状态码\r\n\t\t\t// count=请求次数\r\n\t\t\t// total=总用时;\r\n\t\t\t// max=最大用时;\r\n\t\t\t// mean=平均用时;\r\n\t\t\tresponseTimeCount: [],\r\n\t\t\t//服务器性能\r\n\t\t\t//processors 处理器数量\r\n\t\t\t//totalMemory 可用内存\r\n\t\t\t//maxMemory 最大内存\r\n\t\t\t//freeMemory 剩余内存\r\n\t\t\tserverMetrics: {\r\n\t\t\t\tprocessors: 0,\r\n\t\t\t\ttotalMemory: 0,\r\n\t\t\t\tmaxMemory: 0,\r\n\t\t\t\tfreeMemory: 0\r\n\t\t\t},\r\n\t\t\t//连接服务器的WebSocket\r\n\t\t\twebsocket: null\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 是否显示请求数量统计信息\r\n\t\t */\r\n\t\tisShowStatistics() {\r\n\t\t\tif (this.requestData.count > 0 && this.requestData.average > 0 && this.requestData.interval > 0) {\r\n\t\t\t\tthis.isStatistics = true;\r\n\t\t\t\tthis.statisticsInfo = this.$t('statisticsInfo')\r\n\t\t\t\t\t.replace('{interval}', this.requestData.interval)\r\n\t\t\t\t\t.replace('{average}', this.requestData.average)\r\n\t\t\t\t\t.replace('{count}', this.requestData.count)\r\n\t\t\t\t\t.replace('{conn}', this.requestConfig.poolSize == null ? this.requestData.count : this.requestConfig.poolSize)\r\n\t\t\t\t\t.replace('{sum}', this.requestData.count * this.requestData.average);\r\n\t\t\t} else {\r\n\t\t\t\tthis.isStatistics = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除SubProtocols\r\n\t\t * @param {Object} item\r\n\t\t */\r\n\t\tremoveSubProtocols(item) {\r\n\t\t\tthis.$confirm('确认关闭？')\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tvar index = this.requestData.subProtocols.indexOf(item);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tthis.requestData.subProtocols.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 添加SubProtocols\r\n\t\t */\r\n\t\taddSubProtocols() {\r\n\t\t\tthis.requestData.subProtocols.push({\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tkey: Date.now()\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除header\r\n\t\t * @param {Object} item\r\n\t\t */\r\n\t\tremoveHeader(item) {\r\n\t\t\tthis.$confirm('确认关闭？')\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tvar index = this.requestData.headers.indexOf(item);\r\n\t\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\t\tthis.requestData.headers.splice(index, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 添加header\r\n\t\t */\r\n\t\taddHeader() {\r\n\t\t\tthis.requestData.headers.push({\r\n\t\t\t\tkey: '',\r\n\t\t\t\tvalue: ''\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载证书的key\r\n\t\t */\r\n\t\tloadCertKey() {\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\tvar file = this.$refs.readCertKey.files[0];\r\n\t\t\treader.readAsText(file);\r\n\t\t\tvar tis = this;\r\n\t\t\treader.onload = function(res) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\ttis.requestData.certKey = res.target.result;\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载证书的value\r\n\t\t */\r\n\t\tloadCertValue() {\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\tvar file = this.$refs.readCertValue.files[0];\r\n\t\t\treader.readAsText(file);\r\n\t\t\tvar tis = this;\r\n\t\t\treader.onload = function(res) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\ttis.requestData.certValue = res.target.result;\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清楚数据为默认数据\r\n\t\t */\r\n\t\tclearToDefaultData() {\r\n\t\t\t//请求数据长度\r\n\t\t\tthis.requestDataLen = 0;\r\n\t\t\t//请求响应数据长度\r\n\t\t\tthis.responseDataLen = 0;\r\n\t\t\t//请求成功的数量\r\n\t\t\tthis.responseSucceeded = 0;\r\n\t\t\t//请求失败的数量\r\n\t\t\tthis.responseFailed = 0;\r\n\t\t\t//请求统计信息\r\n\t\t\tthis.responseTimeCount = [];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 截取小数点并四舍五入\r\n\t\t * @param {Double} num\r\n\t\t * @param {int} len\r\n\t\t */\r\n\t\ttoFixed(num, len) {\r\n\t\t\tvar index = num.toString().indexOf('.');\r\n\t\t\tif (index != -1) {\r\n\t\t\t\tif (num.toString().substring(index).length > len) {\r\n\t\t\t\t\treturn num.toFixed(len);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn num;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn num;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 执行请求\r\n\t\t */\r\n\t\texecute() {\r\n\t\t\tthis.$refs.requestTable.validate(valid => {\r\n\t\t\t\tif (valid) {\r\n\t\t\t\t\tthis.isExecuting = true; //修改是否在执行状态,执行中\r\n\t\t\t\t\tthis.isExecuted = true; //标记前端控制台状态为已执行\r\n\t\t\t\t\tvar connectMsg = this.$t('consoleConnecting');\r\n\t\t\t\t\tthis.consolePrintInfo(LOG_INFO, connectMsg);\r\n\t\t\t\t\t//连接WebSocket并在open后请求数据\r\n\t\t\t\t\tvar wshost=process.env.VUE_APP_BASE_API;\r\n\t\t\t\t\tif(wshost==null || wshost=='wlhost'){\r\n\t\t\t\t\t\twshost=window.location.host;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.websocket = new WebSocket('ws://'+wshost+'/ws/ost');\r\n\t\t\t\t\tthis.websocket.onopen = () => {\r\n\t\t\t\t\t\tvar connected = this.$t('consoleConnected');\r\n\t\t\t\t\t\tthis.consolePrintInfo(LOG_SUCCESS, connected);\r\n\t\t\t\t\t\tvar trData = this.requestData;\r\n\t\t\t\t\t\t//初始化默认数据\r\n\t\t\t\t\t\tthis.clearToDefaultData();\r\n\r\n\t\t\t\t\t\t//加载请求数据\r\n\t\t\t\t\t\tvar reqData = {\r\n\t\t\t\t\t\t\ttype: trData.requestType,\r\n\t\t\t\t\t\t\turl: trData.url.trim(),\r\n\t\t\t\t\t\t\tcount: trData.count,\r\n\t\t\t\t\t\t\taverage: trData.average,\r\n\t\t\t\t\t\t\tinterval: trData.interval\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (trData.isSSL) {\r\n\t\t\t\t\t\t\treqData.isSSL = true;\r\n\t\t\t\t\t\t\tif (trData.cert == REQUEST_CERT_DEFAULT) {\r\n\t\t\t\t\t\t\t\treqData.cert = REQUEST_CERT_DEFAULT;\r\n\t\t\t\t\t\t\t} else if (trData.certKey != null && trData.certKey.trim() != '' && (trData.certValue != null && trData.certValue.trim() != '')) {\r\n\t\t\t\t\t\t\t\treqData.cert = trData.cert;\r\n\t\t\t\t\t\t\t\treqData.certKey = trData.certKey.trim();\r\n\t\t\t\t\t\t\t\treqData.certValue = trData.certValue.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.requestType == REQUEST_TYPE_WEB_SOCKET) {\r\n\t\t\t\t\t\t\treqData.webSocketVersion = trData.webSocketVersion;\r\n\t\t\t\t\t\t\tif (trData.subProtocols.length > 0) {\r\n\t\t\t\t\t\t\t\tvar subPs = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < trData.subProtocols.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar v = trData.subProtocols[i].value;\r\n\t\t\t\t\t\t\t\t\tif (v != null && v.trim() != '') {\r\n\t\t\t\t\t\t\t\t\t\tsubPs.push(v.trim());\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (subPs.length > 0) {\r\n\t\t\t\t\t\t\t\t\treqData.subProtocols = subPs;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (trData.requestType == REQUEST_TYPE_TCP) {\r\n\t\t\t\t\t\t\treqData.host = trData.host.trim();\r\n\t\t\t\t\t\t\tif (trData.port == '' || trData < 0 || trData > 65535 || isNaN(parseInt(trData.port))) {\r\n\t\t\t\t\t\t\t\treqData.port = trData.isSSL ? 443 : 80;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treqData.port = parseInt(trData.port);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (trData.serverName != null && trData.serverName.trim() != '') {\r\n\t\t\t\t\t\t\t\treqData.serverName = trData.serverName.trim();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.requestType == REQUEST_TYPE_HTTP) {\r\n\t\t\t\t\t\t\treqData.method = trData.method;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.headers != null && trData.headers.length != 0 && trData.requestType != REQUEST_TYPE_TCP) {\r\n\t\t\t\t\t\t\tvar headers = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < trData.headers.length; i++) {\r\n\t\t\t\t\t\t\t\tvar h = trData.headers[i];\r\n\t\t\t\t\t\t\t\tif (h.key.trim() != '' && h.value.trim() != '') {\r\n\t\t\t\t\t\t\t\t\theaders.push(h.trim());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (headers.length > 0) {\r\n\t\t\t\t\t\t\t\treqData.headers = headers;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (trData.body != null && trData.body.trim() != '') {\r\n\t\t\t\t\t\t\treqData.body = trData.body.trim();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treqData.keepAlive = this.requestConfig.keepAlive;\r\n\t\t\t\t\t\tif (reqData.keepAlive) {\r\n\t\t\t\t\t\t\tvar vu = this.requestConfig.poolSize;\r\n\t\t\t\t\t\t\tif (vu == null || vu == 0 || vu == '' || isNaN(parseInt(vu))) {\r\n\t\t\t\t\t\t\t\tvu = trData.count;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treqData.poolSize = parseInt(vu);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.requestConfig.timeout != null && this.requestConfig.timeout > 0) {\r\n\t\t\t\t\t\t\treqData.timeout = parseInt(this.requestConfig.timeout);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treqData.printResInfo = this.requestConfig.printResInfo;\r\n\t\t\t\t\t\tconsole.log(reqData);\r\n\t\t\t\t\t\tvar body = { code: WS_COMMAND_SUBMIT_TEST, data: reqData };\r\n\t\t\t\t\t\tthis.websocket.send(JSON.stringify(body));\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthis.websocket.onerror = err => {\r\n\t\t\t\t\t\tconsole.log('Connection error:');\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t\tthis.isExecuting = false; //修改是否在执行状态,执行结束\r\n\t\t\t\t\t\tthis.consolePrintInfo(LOG_ERROR, this.$t('consoleConnectFailed'));\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//关闭事件\r\n\t\t\t\t\tthis.websocket.onclose = () => {\r\n\t\t\t\t\t\tthis.isExecuting = false; //修改是否在执行状态,执行结束\r\n\r\n\t\t\t\t\t\tconsole.log(this.$t('consoleClosed'));\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//响应事件\r\n\t\t\t\t\tthis.websocket.onmessage = res => {\r\n\t\t\t\t\t\t//这里处理后台返回的结果\r\n\t\t\t\t\t\tvar data = JSON.parse(res.data);\r\n\t\t\t\t\t\t// console.log(data);\r\n\t\t\t\t\t\tif (data.code == WS_COMMAND_INVALID_PARAMETER) {\r\n\t\t\t\t\t\t\t//缺少参数或取消参数的响应\r\n\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_ERROR, this.$t('commandInvalidParameter') + data.msg);\r\n\t\t\t\t\t\t\tthis.websocket.close();\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_BEFORE_REQUEST_TEST) {\r\n\t\t\t\t\t\t\t//提交测试前的测试响应\r\n\t\t\t\t\t\t\tif (data.data == 1) {\r\n\t\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_SUCCESS, this.$t('commandBeforeRequestTestSucceeded'));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_ERROR, this.$t('commandBeforeRequestTestFailed') + data.msg);\r\n\t\t\t\t\t\t\t\tthis.websocket.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_JVM_METRIC) {\r\n\t\t\t\t\t\t\tvar rd = data.data;\r\n\t\t\t\t\t\t\tthis.serverMetrics.processors = rd.processors;\r\n\t\t\t\t\t\t\tthis.serverMetrics.totalMemory = this.toFixed(rd.totalMemory / 1048576, 5);\r\n\t\t\t\t\t\t\tthis.serverMetrics.maxMemory = this.toFixed(rd.maxMemory / 1048576, 5);\r\n\t\t\t\t\t\t\tthis.serverMetrics.freeMemory = this.toFixed(rd.freeMemory / 1048576, 5);\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_TEST_LOG_RESPONSE) {\r\n\t\t\t\t\t\t\t//请求日志响应\r\n\t\t\t\t\t\t\tvar resData = data.data;\r\n\t\t\t\t\t\t\tvar state = resData.state == 1 ? this.$t('succee') : this.$t('fail');\r\n\t\t\t\t\t\t\tvar msg = this.$t('commandTestResponseCount').replace('{count}', resData.count);\r\n\t\t\t\t\t\t\tif (resData.index != 0) {\r\n\t\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseIndex').replace('{index}', resData.index);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseState').replace('{state}', state);\r\n\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseCode').replace('{code}', resData.code);\r\n\t\t\t\t\t\t\tif (resData.body != null) {\r\n\t\t\t\t\t\t\t\tmsg += ', ' + this.$t('commandTestResponseBody').replace('{body}', resData.body);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.requestConfig.printResInfo) {\r\n\t\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_INFO, msg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_TEST_RESPONSE) {\r\n\t\t\t\t\t\t\t//测试统计信息响应\r\n\t\t\t\t\t\t\tvar resData = data.data;\r\n\t\t\t\t\t\t\t//获取http/ws响应长度数据统计\r\n\t\t\t\t\t\t\tvar vhcbr = resData['vertx.http.client.bytesReceived'];\r\n\t\t\t\t\t\t\tif (vhcbr == null) {\r\n\t\t\t\t\t\t\t\t//获取tcp的响应数据长度\r\n\t\t\t\t\t\t\t\tvhcbr = resData['vertx.net.client.bytesReceived'];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (vhcbr != null && vhcbr.length > 0) {\r\n\t\t\t\t\t\t\t\tvar total = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < vhcbr.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttotal += vhcbr[i].total;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.responseDataLen = total;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//获取http/ws发送数据长度统计\r\n\t\t\t\t\t\t\tvar vhcbs = resData['vertx.http.client.bytesSent'];\r\n\t\t\t\t\t\t\tif (vhcbs == null) {\r\n\t\t\t\t\t\t\t\t//获取tcp发送数据长度统计\r\n\t\t\t\t\t\t\t\tvhcbs = resData['vertx.net.client.bytesSent'];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (vhcbs != null && vhcbs.length > 0) {\r\n\t\t\t\t\t\t\t\tvar total = 0;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < vhcbs.length; i++) {\r\n\t\t\t\t\t\t\t\t\ttotal += vhcbs[i].total;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.requestDataLen = total;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//获取http/ws响应统计\r\n\t\t\t\t\t\t\tvar vhcrt = resData['vertx.http.client.responseTime'];\r\n\t\t\t\t\t\t\tif (vhcrt != null && vhcrt.length > 0) {\r\n\t\t\t\t\t\t\t\tthis.responseTimeCount = [];\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < vhcrt.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar obj = vhcrt[i];\r\n\t\t\t\t\t\t\t\t\tvar timeCount = {};\r\n\t\t\t\t\t\t\t\t\ttimeCount.code = obj.tags.code;\r\n\t\t\t\t\t\t\t\t\ttimeCount.count = obj.count;\r\n\t\t\t\t\t\t\t\t\ttimeCount.total = this.toFixed(obj.totalTimeMs, 5);\r\n\t\t\t\t\t\t\t\t\ttimeCount.max = this.toFixed(obj.maxMs, 5);\r\n\t\t\t\t\t\t\t\t\ttimeCount.mean = this.toFixed(obj.meanMs, 5);\r\n\t\t\t\t\t\t\t\t\tthis.responseTimeCount.push(timeCount);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//获取已成功处理数量\r\n\t\t\t\t\t\t\tthis.responseSucceeded = resData.succeeded;\r\n\t\t\t\t\t\t\t//获取处理已失败数量\r\n\t\t\t\t\t\t\tthis.responseFailed = resData.failed;\r\n\t\t\t\t\t\t} else if (data.code == WS_COMMAND_TEST_COMPLETE) {\r\n\t\t\t\t\t\t\tthis.consolePrintInfo(LOG_SUCCESS, this.$t('commandTestComplete'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tdocument.documentElement.scrollTop = document.body.scrollHeight;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消执行\r\n\t\t */\r\n\t\texecuteCancel() {\r\n\t\t\tthis.isExecuting = false;\r\n\t\t\tif (this.websocket != null) {\r\n\t\t\t\tthis.websocket.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\tconsolePrintInfo(log, msg) {\r\n\t\t\tvar time = new Date()\r\n\t\t\t\t.toISOString()\r\n\t\t\t\t.replace('T', ' ')\r\n\t\t\t\t.replace('Z', '');\r\n\t\t\tvar el = document.createElement('div');\r\n\t\t\tif (log == 'SUCCESS') {\r\n\t\t\t\tel.style.color = '#28a745';\r\n\t\t\t} else if (log == 'ERROR') {\r\n\t\t\t\tel.style.color = '#dc3545';\r\n\t\t\t}\r\n\t\t\tvar logEl = document.createElement('p');\r\n\t\t\tlogEl.style.marginBottom = '0';\r\n\t\t\tlogEl.innerText = '[ ' + log + ' ] ' + time;\r\n\t\t\tel.appendChild(logEl);\r\n\r\n\t\t\tvar msgEl = document.createElement('p');\r\n\t\t\tmsgEl.style.marginTop = '3px';\r\n\t\t\tmsgEl.innerText = msg;\r\n\t\t\tel.appendChild(msgEl);\r\n\t\t\tdocument.getElementById('response-body').appendChild(el);\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\tthis.$refs.responseConsoleBody.scrollTop = this.$refs.responseConsoleBody.scrollHeight;\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\t'requestData.url'(val) {\r\n\t\t\tif (val.indexOf('https://') != -1 && this.requestData.requestType == REQUEST_TYPE_HTTP) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (val.indexOf('wss://') != -1 && this.requestData.requestType == REQUEST_TYPE_WEB_SOCKET) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (this.requestData.requestType != 'TCP') {\r\n\t\t\t\tthis.requestData.isSSL = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t'requestData.requestType'() {\r\n\t\t\tif (this.requestData.url.indexOf('https://') != -1 && this.requestData.requestType == REQUEST_TYPE_HTTP) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (this.requestData.url.indexOf('wss://') != -1 && this.requestData.requestType == REQUEST_TYPE_WEB_SOCKET) {\r\n\t\t\t\tthis.requestData.isSSL = true;\r\n\t\t\t} else if (this.requestData.requestType != REQUEST_TYPE_TCP) {\r\n\t\t\t\tthis.requestData.isSSL = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t'requestData.count'() {\r\n\t\t\tif ((this.requestData.count >= 10 && this.requestData.average > 1000) || this.requestData.average > 10000) {\r\n\t\t\t\tthis.requestConfig.printResInfo = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.requestConfig.printResInfo = true;\r\n\t\t\t}\r\n\t\t\tthis.isShowStatistics();\r\n\t\t},\r\n\t\t'requestData.average'() {\r\n\t\t\tif ((this.requestData.count >= 10 && this.requestData.average > 1000) || this.requestData.average > 10000) {\r\n\t\t\t\tthis.requestConfig.printResInfo = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.requestConfig.printResInfo = true;\r\n\t\t\t}\r\n\t\t\tthis.isShowStatistics();\r\n\t\t},\r\n\t\t'requestData.interval'() {\r\n\t\t\tthis.isShowStatistics();\r\n\t\t},\r\n\t\t'requestConfig.poolSize'() {\r\n\t\t\tthis.isShowStatistics();\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\twatchResponseHeaderColor() {\r\n\t\t\t// 获取响应状态\r\n\t\t\tif (this.responseSucceeded > this.responseFailed) {\r\n\t\t\t\treturn 'background-color:#e8f6f0;';\r\n\t\t\t} else if (this.responseSucceeded < this.responseFailed) {\r\n\t\t\t\treturn 'background-color:#fae7e7;';\r\n\t\t\t} else {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n/* 修改框架样式 */\r\n.el-input__inner::placeholder {\r\n\tcolor: #333 !important;\r\n}\r\n\r\n.el-textarea__inner::placeholder {\r\n\tcolor: #333 !important;\r\n}\r\n\r\n/* 通用样式 */\r\na {\r\n\ttext-decoration: none;\r\n\tcolor: #304455;\r\n}\r\nimg {\r\n\tborder: none;\r\n}\r\n.sm-margin-left-0x {\r\n\tmargin-left: 0 !important;\r\n}\r\n\r\n@media screen and (max-width: 768px) {\r\n\t#mobile-bar {\r\n\t\tdisplay: block !important;\r\n\t}\r\n\t#pc-bar {\r\n\t\tdisplay: none !important;\r\n\t}\r\n\t#aside {\r\n\t\tpadding-top: 40px !important;\r\n\t\twidth: 100% !important;\r\n\t}\r\n\t#main {\r\n\t\tpadding-top: 60px !important;\r\n\t}\r\n\t#response-heander .response-header-label {\r\n\t\twidth: 100% !important;\r\n\t\ttext-align: left !important;\r\n\t\tjustify-content: left !important;\r\n\t}\r\n\t.sm-margin-left-0x {\r\n\t\tmargin-left: 0.6rem !important;\r\n\t}\r\n}\r\n\r\n/* 手机导航栏 */\r\n#mobile-bar {\r\n\tposition: fixed;\r\n\tdisplay: none;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 40px;\r\n\tbackground-color: #fff;\r\n\tz-index: 20;\r\n\tbox-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\r\n}\r\n#mobile-bar .menu-button {\r\n\tposition: absolute;\r\n\ttop: 8px;\r\n\tleft: 12px;\r\n\theight: 25px;\r\n\twidth: 25px;\r\n\tz-index: 2;\r\n}\r\n\r\n#mobile-bar .logo {\r\n\tposition: absolute;\r\n\ttop: 10px;\r\n\ttext-align: center;\r\n\twidth: 100%;\r\n}\r\n\r\n/* 电脑导航栏 */\r\n#pc-bar {\r\n\tposition: fixed;\r\n\twidth: 100%;\r\n\ttop: 0;\r\n\twidth: 100%;\r\n\tbox-shadow: 0 0 1px rgba(0, 0, 0, 0.25);\r\n\ttransition: background-color 0.3s ease-in-out;\r\n\tbackground-color: #fff;\r\n\theight: 40px;\r\n\tpadding: 10px 60px;\r\n\tz-index: 10;\r\n}\r\n#logo {\r\n\tdisplay: inline-block;\r\n\tfont-size: 1.5em;\r\n\tline-height: 40px;\r\n\tcolor: #273849;\r\n\tfont-family: 'Dosis', 'Source Sans Pro', 'Helvetica Neue', Arial, sans-serif;\r\n\tfont-weight: 500;\r\n}\r\n#logo img {\r\n\tvertical-align: middle;\r\n\tmargin-right: 6px;\r\n\twidth: 40px;\r\n\theight: 40px;\r\n}\r\n\r\n/* #nav {\n\tposition: fixed;\n}\n#nav {\n\tlist-style-type: none;\n\tmargin: 0;\n\tpadding: 0;\n\tposition: absolute;\n\tright: 30px;\n\ttop: 10px;\n\theight: 40px;\n\tline-height: 40px;\n}\n#nav li {\n\tdisplay: inline-block;\n\tposition: relative;\n\tmargin: 0 0.6em;\n\tcursor: pointer;\n}\n#nav li a:hover {\n\tpadding-bottom: 2px;\n\tborder-bottom: 2px solid #42b983;\n}\n */\r\n\r\n#main {\r\n\tcolor: #333;\r\n\tpadding-top: 80px;\r\n\tmax-width: 1024px;\r\n\tmargin-left: auto;\r\n\tmargin-right: auto;\r\n\tmargin-bottom: 10px;\r\n\tscrollbar-width: thin;\r\n}\r\n\r\n#response-heander {\r\n\tbackground-color: #f5f7fa;\r\n\tborder-radius: 5px 5px 0 0;\r\n\tpadding: 10px 5px;\r\n}\r\n#response-heander .response-header-box {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n}\r\n#response-heander .response-header-label {\r\n\twidth: 105px;\r\n\tmargin-right: 10px;\r\n\tdisplay: flex;\r\n\ttext-align: right;\r\n\tjustify-content: right;\r\n\talign-items: center;\r\n}\r\n#response-heander .response-header-body {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\tjustify-content: left;\r\n\talign-items: flex-end;\r\n}\r\n\r\n#response-heander .response-header-body .small {\r\n\tline-height: 34px;\r\n\tmargin-left: 0.6rem;\r\n}\r\n\r\n#response-charts-line {\r\n\tbackground-color: #f5f7fa;\r\n\tpadding-top: 10px;\r\n}\r\n\r\n#response-body {\r\n\tbackground-color: #18181a;\r\n\tcolor: white;\r\n\tpadding: 5px;\r\n\theight: 40vh;\r\n\tborder-radius: 0 0 5px 5px;\r\n\toverflow-y: auto;\r\n\tscrollbar-width: thin;\r\n}\r\n</style>\n"]}]}